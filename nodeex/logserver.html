<!DOCTYPE html>
<html lang="en">
<head>
	<title>Node Log test</title>
	<meta charset="utf-8" />
</head>
<body>
	<button id="TestButton">Test</button>

	<script>
	(function () {

		'use strict';

		var button = document.getElementById('TestButton');

		function sendLog (message) {
			var beacon = document.createElement('img');
			beacon.src = 'http://localhost:8080/logger/?message=' + encodeURIComponent(message);
			beacon.style.display = 'none';

			document.body.appendChild (beacon);

		};

		function logMessage (message, send) {
			console.log(message);

			if (send) {
				sendLog(message);
			}
		}

		logMessage('Page Loaded', true);

		button.addEventListener('click', function () {
			logMessage('You clicked the button!', true);
		});
	}());
	</script>

</body>

</html>